{% extends 'admin/adminbase.html' %}
{% block tile %}Dashboard{% endblock tile %}
{% block maincontent %}

<div class="content container-fluid">
   <div class="page-header">
      <div class="row">
         <div class="col-sm-12">
            <h3 class="page-title">Welcome Admin!</h3>
            <ul class="breadcrumb">
               <li class="breadcrumb-item active">Dashboard</li>
            </ul>
         </div>
      </div>
   </div>
   <div class="row">
      <div class="col-xl-3 col-sm-6 col-12 d-flex">
         <div class="card bg-one w-100">
            <div class="card-body">
               <div class="db-widgets d-flex justify-content-between align-items-center">
                  <div class="db-icon">
                     <i class="fas fa-user"></i>
                  </div>
                  <div class="db-info">
                    <h3>{{ customer_count }}</h3>
                     <h6>Customers</h6>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="col-xl-3 col-sm-6 col-12 d-flex">
         <div class="card bg-two w-100">
            <div class="card-body">
               <div class="db-widgets d-flex justify-content-between align-items-center">
                  <div class="db-icon">
                     <i class="fas fa-chalkboard-teacher"></i>
                  </div>
                  <div class="db-info">
                    <h3>{{ clients_count }}</h3>
                     <h6>Clients</h6>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="col-xl-3 col-sm-6 col-12 d-flex">
         <div class="card bg-three w-100">
            <div class="card-body">
               <div class="db-widgets d-flex justify-content-between align-items-center">
                  <div class="db-icon">
                     <i class="fas fa-building"></i>
                  </div>
                  <div class="db-info">
                    <h3>{{ grounds_count }}</h3>
                     <h6>Grounds</h6>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="col-xl-3 col-sm-6 col-12 d-flex">
         <div class="card bg-four w-100">
            <div class="card-body">
               <div class="db-widgets d-flex justify-content-between align-items-center">
                  <div class="db-icon">
                     <i class="fas fa-file-invoice-dollar"></i>
                  </div>
                  <div class="db-info">
                     <h3>${{total_profit}}</h3>
                     <h6>Profit</h6>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   <div class="row">
     <!-- Revenue Chart Column -->
     <div class="col-md-6">
         <div class="card card-chart">
             <div class="card-header">
                 <div class="row align-items-center">
                     <div class="col-6">
                         <h5 class="card-title">Revenue</h5>
                     </div>
                 </div>
             </div>
             <div class="card-body">
                 <!-- Revenue Chart Container -->
                 <div id="revenue-chart"></div>
             </div>
         </div>
     </div>

     <!-- Number of Bookings Chart Column -->
     <div class="col-md-6">
         <div class="card card-chart">
             <div class="card-header">
                 <div class="row align-items-center">
                     <div class="col-6">
                         <h5 class="card-title">Number of Bookings</h5>
                     </div>
                 </div>
             </div>
             <div class="card-body">
                 <!-- Bookings Chart Container -->
                 <div id="bookings-chart"></div>
             </div>
         </div>
     </div>
 </div>
 <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

<script>
    // Dynamic data from Django context
    var revenueData = {{ revenue_data|safe }};
    var bookingsData = {{ bookings_data|safe }};

    // Initialize the revenue chart
    var revenueChart = new ApexCharts(document.querySelector("#revenue-chart"), {
        chart: {
            type: 'area',
        },
        series: [{
            name: "Revenue",
            data: revenueData,
        }],
        xaxis: {
            categories: ["Sep", "Oct", "Nov", "Dec"],
        },
    });
    revenueChart.render();

    // Initialize the bookings chart
    var bookingsChart = new ApexCharts(document.querySelector("#bookings-chart"), {
        chart: {
            type: 'bar',
        },
        series: [{
            name: "Bookings",
            data: bookingsData,
        }],
        xaxis: {
            categories: ["Sep", "Oct", "Nov", "Dec", "Jan", "Feb"],
        },
    });
    bookingsChart.render();
</script>

   
   

{% endblock maincontent %}
